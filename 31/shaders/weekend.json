{
  "id": 3603,
  "name": "weekend",
  "fragment": "#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\nprecision highp int;\nuniform float time;\nuniform float zoom;\nuniform float petalResoloution;\nuniform float frequency;\nuniform float amplitude;\nuniform vec3 color;\nvarying vec2 Kaleidoscope1561816533593_227_vUv;\nvarying vec3 vPosition;\nvec2 pattern(vec2 p) \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float a = atan(p.x, p.y);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float r = 9.0 * pow(1.0 / length(p), 0.4);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float t = time + length(p) * 0.0012;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return vec2(sin(a * 3.0 + cos(t * 0.25) * 10.0), sin(r * 2. + sin(time * 0.1) * 10.0));\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvarying vec2 Animated_flower_petals1561816541815_240_vUv;\nvarying vec3 fPosition;\nvarying vec3 fNormal;\nvarying vec3 oPosition;\nmat3 cotangent_frame(vec3 N, vec3 p, vec2 uv) \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 dp1 = dFdx(p);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 dp2 = dFdy(p);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec2 duv1 = dFdx(uv);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec2 duv2 = dFdy(uv);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 dp2perp = cross(dp2, N);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 dp1perp = cross(N, dp1);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 T = dp2perp * duv1.x + dp1perp * duv2.x;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 B = dp2perp * duv1.y + dp1perp * duv2.y;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float invmax = inversesqrt(max(dot(T, T), dot(B, B)));\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return mat3(T * invmax, B * invmax, N);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvec3 perturb_normal(vec3 N, vec3 V, vec2 texcoord, vec3 P) \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 map = vec3(amplitude * cos(-P.x * frequency + time * 4.), 1.0, 1.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                mat3 TBN = cotangent_frame(N, -V, texcoord);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return normalize(TBN * map);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvec3 rim(vec3 color, float start, float end, float coef) \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 normal = normalize(fNormal);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 eye = normalize(-fPosition.xyz);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float rim = smoothstep(start, end, 1.0 - dot(normal, eye));\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return clamp(rim, 0.0, 1.0) * coef * color;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvec2 blinnPhongDir(vec3 N, vec3 lightDir, float lightInt, float Ka, float Kd, float Ks, float shininess) \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 s = normalize(lightDir);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 v = normalize(-fPosition);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 n = normalize(N);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 h = normalize(v + s);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float diffuse = Ka + Kd * lightInt * max(0.0, dot(n, s));\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float spec = Ks * pow(max(0.0, dot(n, h)), shininess);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return vec2(diffuse, spec);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvec4 Kaleidoscope1561816533593_227_main(void) \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec4 Kaleidoscope1561816533593_227_gl_FragColor = vec4(0.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec2 p = (Kaleidoscope1561816533593_227_vUv.xy - 0.5) * zoom;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 col = vec3(0.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                for (int i = 0;\n i < 3; i++) p.xy = pattern(p);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                col.rg = sin(p.xy);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                col.b = max(step(abs(p.x * p.x), 0.5), -1.0 / abs(p.y));\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                col = clamp(col, vec3(0.0), vec3(1.0));\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Kaleidoscope1561816533593_227_gl_FragColor = vec4(col, 1.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return Kaleidoscope1561816533593_227_gl_FragColor *= 1.0;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvec4 Animated_flower_petals1561816541815_240_main(void) \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec4 Animated_flower_petals1561816541815_240_gl_FragColor = vec4(0.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec2 p = (Animated_flower_petals1561816541815_240_vUv.xy - 0.5) / 0.5;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float l = length(p);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float a = atan(p.x, p.y) + time * .2;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float c = sin(a * 3. + time * .5) * .25 + .25;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                c += sin(a * 7. + time * 2.25) * .25 + .25;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                float rib = sin((l - time * .1 * 5.) * 10. + sin(petalResoloution * a * 7.) * 5.);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                rib = 1. - rib;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Animated_flower_petals1561816541815_240_gl_FragColor = vec4(l * (1. - rib), c * l, rib * c * l, l);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return Animated_flower_petals1561816541815_240_gl_FragColor *= 1.0;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvec4 Wavy_Plastic1561816626471_259_main() \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec4 Wavy_Plastic1561816626471_259_gl_FragColor = vec4(0.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 N = normalize(fNormal);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 V = normalize(-fPosition);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                N = perturb_normal(N, V, gl_FragCoord.xy, oPosition);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 rimi = rim(vec3(1.0, 0.5, 0.0), 0.2, 0.9, 1.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec2 blin = blinnPhongDir(N, vec3(1.0, 1.0, 1.0), 1.0, 0.3, 0.6, 0.6, 42.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec3 c = color * blin.x + blin.y;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Wavy_Plastic1561816626471_259_gl_FragColor = vec4(c, 1.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return Wavy_Plastic1561816626471_259_gl_FragColor *= 1.0;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvoid main() \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                gl_FragColor = (Animated_flower_petals1561816541815_240_main() + Kaleidoscope1561816533593_227_main() + Wavy_Plastic1561816626471_259_main());                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\n",
  "vertex": "precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec2 Kaleidoscope1561816533593_227_vUv;\nvarying vec3 vPosition;\nvarying vec2 Animated_flower_petals1561816541815_240_vUv;\nvarying vec3 fNormal;\nvarying vec3 fPosition;\nvarying vec3 oPosition;\nvec4 Kaleidoscope1561816533593_227_main() \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec4 Kaleidoscope1561816533593_227_gl_Position = vec4(0.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Kaleidoscope1561816533593_227_vUv = uv;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vPosition = position;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Kaleidoscope1561816533593_227_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return Kaleidoscope1561816533593_227_gl_Position *= 1.0;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvec4 Animated_flower_petals1561816541815_240_main() \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec4 Animated_flower_petals1561816541815_240_gl_Position = vec4(0.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Animated_flower_petals1561816541815_240_vUv = uv;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Animated_flower_petals1561816541815_240_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return Animated_flower_petals1561816541815_240_gl_Position *= 1.0;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvec4 Wavy_Plastic1561816626471_259_main() \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec4 Wavy_Plastic1561816626471_259_gl_Position = vec4(0.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                fNormal = normalize(normalMatrix * normal);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                oPosition = position;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec4 pos = modelViewMatrix * vec4(position, 1.0);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                fPosition = pos.xyz;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Wavy_Plastic1561816626471_259_gl_Position = projectionMatrix * pos;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return Wavy_Plastic1561816626471_259_gl_Position *= 1.0;\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\nvoid main() \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                gl_Position = Kaleidoscope1561816533593_227_main() + Animated_flower_petals1561816541815_240_main() + Wavy_Plastic1561816626471_259_main();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }\n",
  "uniforms": {
    "time": {
      "type": "f",
      "glslType": "float"
    },
    "zoom": {
      "value": "100000000",
      "type": "f",
      "glslType": "float"
    },
    "petalResoloution": {
      "value": "0",
      "type": "f",
      "glslType": "float"
    },
    "frequency": {
      "value": "10",
      "type": "f",
      "glslType": "float"
    },
    "amplitude": {
      "value": "1.5",
      "type": "f",
      "glslType": "float"
    },
    "color": {
      "value": {
        "r": 0,
        "g": 0,
        "b": 0
      },
      "type": "c",
      "glslType": "vec3"
    }
  },
  "url": "http://shaderfrog.com/app/view/3603",
  "user": {
    "username": "öjk",
    "url": "http://shaderfrog.com/app/profile/andrewray"
  }
}